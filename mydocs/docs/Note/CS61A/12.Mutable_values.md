# Mutable Values

> Johnåœ¨æœ¬èŠ‚å¼€å§‹å°±å¼ºè°ƒäº†è¿™ä¸€è®²çš„é‡è¦æ€§
>
> **...today is a very important day, where you learn about mutation, which is when a value actually changes, and this is not something thats happened in the course before, but it is reslly common and it's a core element of what we're going to be studying very soon in this course, which is whatâ€˜s called *object oriented programming...***

## Objects

```py
>>> from datetime import date
>>> date
<class 'datetime.date'>
```

`date`æ˜¯ä¸€ä¸ª`class`ï¼ˆç±»ï¼‰

```py
>>> today = date(2024, 3, 28)
>>> today
datetime.date(2024, 3, 28)
>>> another_date = date(2024, 8, 13)
>>> str(another_date - today)
'138 days, 0:00:00'
```

ä½¿ç”¨è¿™ä¸ªç±»åˆ›å»ºä¸€ä¸ªæ—¥æœŸï¼Œä¹Ÿå¯ä»¥è®¡ç®—ä¸¤ä¸ªæ—¥æœŸçš„å·®å€¼

å¯¹è±¡æœ‰å±žæ€§ï¼ˆattributesï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥ç†è§£ä¸ºè¯¥å¯¹è±¡ä¸­æŸä¸ªå€¼çš„åå­—ã€‚ä½¿ç”¨ç‚¹è¯­æ³•æ¥è®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±žæ€§

```python
>>> <expression> . <name>
```

`<expression>` è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡ï¼Œ`<name>` è¡¨ç¤ºè¯¥å¯¹è±¡ä¸­å¯¹æŸä¸ªå±žæ€§çš„åç§°ã€‚

```python
>>> today.year
2024
>>> today.month
3
```

> å¯¹è±¡è¿˜æœ‰æ–¹æ³•ï¼ˆmethodsï¼‰çš„æ¦‚å¿µï¼Œå…¶å®žä¹Ÿæ˜¯å±žæ€§ï¼Œåªä¸è¿‡è¯¥å±žæ€§çš„å€¼æ˜¯å‡½æ•°ã€‚

```python
>>> today.strftime('%A %B %d')
'Thursday March 28'
```

`strftime`å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒæŽ¥å—ä¸€äº›å‚æ•°ï¼Œå°±èƒ½è¿”å›žæˆ‘ä»¬æœŸæœ›çš„ç»“æžœ

stringå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š

```python
>>> s.upper()
'HELLO'
>>> s.lower()
'hello'
>>> s.swapcase()
'hELLO'
# è¿™äº›æ–¹æ³•çš„è°ƒç”¨éƒ½æ˜¯åŸºäºŽåŽŸæ¥çš„å­—ç¬¦ä¸²è¿”å›žä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¼šæ”¹å˜åŽŸæœ‰çš„å­—ç¬¦ä¸²
>>> s
'Hello'
```

ä¸€äº›å¥½çŽ©çš„ç¼–ç 

```python
>>> from unicodedata import lookup
>>> lookup('WHITE SMILING FACE')
'â˜º'
>>> lookup('SNOWMAN')
'â˜ƒ'
>>> lookup('BABY')
'ðŸ‘¶'
```

## Mutation Operations

```python
>>> l = ['a', 'b', 'c']
>>> s = l
>>> l.pop()
'c'
>>> l
['a', 'b']
>>> s
['a', 'b']
```

æƒŠè®¶çš„å‘çŽ°`s`ç«Ÿç„¶ä¹Ÿè¢«æ”¹å˜äº†ã€‚è¿™æ˜¯å› ä¸ºåˆ—è¡¨æ˜¯å¯å˜æ•°æ®ï¼ˆè®°å¾—ä¹‹å‰åœ¨`Function`ä¸­å†™åˆ°ï¼šâ€œ*è¿™è¯´æ˜Ž`area`åªæ˜¯ç»‘å®šäº†314è¿™ä¸ªå€¼ï¼Œè‡³äºŽè¿™ä¸ªå€¼æ˜¯æ€Žä¹ˆæ¥çš„å®ƒå¹¶ä¸æ¸…æ¥š*â€ï¼Œè¿™é‡Œè¯´ä¸å˜çš„æ•°æ®æ˜¯æ•°å­—ï¼‰

> - åƒæ•°å­—è¿™æ ·çš„åŸºæœ¬æ•°æ®ç±»åž‹çš„å®žä¾‹æ˜¯ä¸å¯å˜ï¼ˆimmutableï¼‰çš„ã€‚å®ƒä»¬æ‰€ä»£è¡¨çš„å€¼ï¼Œåœ¨ç¨‹åºè¿è¡ŒæœŸé—´æ˜¯ä¸å¯ä»¥æ›´æ”¹çš„ã€‚ å¦ä¸€æ–¹é¢ï¼Œåˆ—è¡¨å°±æ˜¯å¯å˜çš„ï¼ˆmutableï¼‰
> - **æ•°æ®å…±äº«å’Œèº«ä»½ï¼ˆSharing and Identityï¼‰**æ­£æ˜¯ç”±äºŽæˆ‘ä»¬æ²¡æœ‰åœ¨æ“ä½œæ•°æ®æ—¶åˆ›å»ºæ–°çš„åˆ—è¡¨ï¼Œè€Œæ˜¯ç›´æŽ¥æ“ä½œçš„æºæ•°æ®ï¼Œè¿™å°±å¯¼è‡´å˜é‡ `s` ä¹Ÿè¢«æ”¹å˜äº†ï¼Œå› ä¸ºå®ƒå’Œå˜é‡ `l` ç»‘å®šåˆ°æ—¶åŒä¸€ä¸ªåˆ—è¡¨ï¼

Python æä¾›äº† `is` å’Œ `is not` ä¸¤ç§æ¯”è¾ƒæ“ä½œç¬¦æ¥éªŒè¯ä¸¤ä¸ªå˜é‡æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡

```py
>>> l is s
True
>>> s is l
True
```

`is`ä¸Ž`==`ä¸åŒï¼š

```py
>>> a = [1, 2]
>>> b = [1, 2]
>>> a == b
True
>>> a is b  # aä¸Žbåªæ˜¯å€¼ç›¸åŒï¼Œä½†å¹¶ä¸æ˜¯æŒ‡å‘åŒä¸€å˜é‡
False
------
>>> a = [10]
>>> b = a
>>> a == b
True
>>> a is b
True        # a,bæŒ‡å‘åŒä¸€ä¸ªå˜é‡
```

Johnç»™äº†ä¸€ä¸ªè¿·æƒ‘çš„ä¾‹å­ï¼š

```py
>>> def f(s=[]):
...     s.append(5)
...     return len(s)
...
>>> f()
1
>>> f()
2
```

æˆ‘å¼€å§‹æ²¡æœ‰æƒ³æ¸…æ¥šä¸ºä»€ä¹ˆç¬¬äºŒæ¬¡è°ƒç”¨`f`ä¼šè¾“å‡º2ï¼ŒåŽæ¥çŸ¥é“äº†ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨`f`æ—¶ï¼Œ`s`å°±è¢«æ·»åŠ äº†å…ƒç´ 5ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ï¼Œç”±äºŽæ²¡æœ‰ä¼ å‚ï¼Œ`f`ä¼šä½¿ç”¨é»˜è®¤å‚æ•°`s`ï¼Œè€Œæ­¤æ—¶`s`å·²ç»è¢«ä¿®æ”¹ï¼š

!!! note

    è¿™ä¸ªç¨‹åºå±•ç¤ºäº†ä¸€ä¸ªå¸¸è§çš„ Python é»˜è®¤å‚æ•°é™·é˜±ï¼šé»˜è®¤å‚æ•°åœ¨å‡½æ•°å®šä¹‰æ—¶ä¼šè¢«åˆå§‹åŒ–ï¼Œå¹¶åœ¨æ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶éƒ½ä¼šç»§ç»­ä½¿ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚å› æ­¤ï¼Œåœ¨é»˜è®¤å‚æ•°æ˜¯å¯å˜å¯¹è±¡ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ç­‰ï¼‰çš„æƒ…å†µä¸‹ï¼Œå¦‚æžœå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œè¿™äº›ä¿®æ”¹ä¼šåœ¨åŽç»­è°ƒç”¨ä¸­ä¿ç•™ä¸‹æ¥ã€‚

**æ¯æ¬¡è°ƒç”¨ `f()` æ—¶ï¼Œåˆ—è¡¨ `s` éƒ½ä¼šè¢«ä¿®æ”¹å¹¶ä¿å­˜åœ¨å‡½æ•°å®šä¹‰æ—¶åˆ›å»ºçš„é»˜è®¤åˆ—è¡¨ä¸­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŽç»­è°ƒç”¨ä¼šçœ‹åˆ°å‰é¢çš„ä¿®æ”¹ã€‚**

## Tuplesï¼ˆå…ƒç»„ï¼‰

```py
>>> tuple([1, 2, 3])
(1, 2, 3)
>>> 2,
(2,)
>>> {(1, 2): 3}  # å…ƒç»„å¯ä»¥ä½œä¸ºå­—å…¸çš„key
{(1, 2): 3}
```

å…ƒç»„ä¸å¯æ”¹å˜ï¼Œä½†å¯ä»¥æ”¹å˜å…ƒç»„ä¸­çš„å¯å˜å…ƒç´ 

```python
>>> s = ([1, 2], 3)
>>> s[0][0] = 666
>>> s
([666, 2], 3)
```
